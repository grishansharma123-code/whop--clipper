<!DOCTYPE html>
<html>
<head>
    <title>Whop AI Clipper</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #0f172a; color: white; }
        .box { border: 2px dashed #38bdf8; padding: 40px; border-radius: 20px; max-width: 500px; margin: auto; }
        .btn { background: #38bdf8; border: none; padding: 15px 30px; border-radius: 10px; font-weight: bold; cursor: pointer; color: #0f172a; }
        #clip-link { margin-top: 20px; display: block; color: #38bdf8; font-weight: bold; text-decoration: none; }
    </style>
</head>
<body>
    <h1>Whop AI Video Clipper</h1>
    <div class="box">
        <p>Upload a video to generate a 30-second viral vertical clip.</p>
        <button id="upload_widget" class="btn">Upload Video</button>
        <div id="results"></div>
    </div>

    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script type="text/javascript">  
        var myWidget = cloudinary.createUploadWidget({
            cloudName: 'dozlfqmtj', 
            uploadPreset: 'whop_clipper'
        }, (error, result) => { 
            if (!error && result && result.event === "success") { 
                console.log('Upload successful!');
                // This magic link crops the video to 9:16 vertical and takes the first 30 seconds
                const originalUrl = result.info.secure_url;
                const clipUrl = originalUrl.replace("/upload/", "/upload/c_fill,g_auto,ar_9:16,so_0,eo_30/");
                
                document.getElementById('results').innerHTML = `
                    <p>âœ… Success!</p>
                    <a id="clip-link" href="${clipUrl}" target="_blank">ðŸ”¥ Download Your Vertical Clip</a>
                `;
            }
        });

        document.getElementById("upload_widget").addEventListener("click", function(){
            myWidget.open();
        }, false);
    </script>
</body>
</html>
